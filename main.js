(()=>{console.log("Checked: ",document.querySelector("input[name=type_selection]:checked")?.value),console.log("Rest days: ",document.getElementById("rest_input").value),console.log("Work days: ",document.getElementById("work_input").value);const e=document.getElementById("delete_calendar");e.style.display="none",e.onclick=async function(){e.style.cursor="not-allowed",e.disabled=!0,t.disabled=!1,t.style.cursor="default";try{return await gapi.client.calendar.calendars.delete({calendarId}),e.style.display="none",t.style.display="inline",calendarId="",await getCalendarList(),await listUpcomingEvents()}catch(e){console.log(e)}};const t=document.getElementById("create_calendar");t.style.display="none",t.onclick=async function(){e.disabled=!1,e.style.cursor="default",t.disabled=!0,t.style.cursor="not-allowed";try{return await gapi.client.calendar.calendars.insert({summary:"Escalador"}),t.style.display="none",await getCalendarList(),await listUpcomingEvents()}catch(e){console.log(e)}};const n=document.getElementById("create_event");n.style.visibility="hidden",n.disabled=!0,n.onclick=async function(){if(n.disabled=!0,n.style.cursor="not-allowed","both"===o.optionInput)for(const e of i)await gapi.client.calendar.events.insert(e);else if("work"===o.optionInput){const e=i.filter((e=>"Trabalho"===e.summary));for(const t of e)await gapi.client.calendar.events.insert(t)}else{const e=i.filter((e=>"Folga"===e.summary));for(const t of e)await gapi.client.calendar.events.insert(t)}return window.alert("Eventos registrados com sucesso!"),await listUpcomingEvents()};const a=document.getElementById("accept_button");a.onclick=function(){if(a.disabled=!0,i=[],!function(){const e=document.querySelector("input[name=type_selection]:checked")?.value,t=document.getElementById("rest_input")?.value,n=document.getElementById("work_input")?.value,a=new Date(`${document.getElementById("start_date")?.value} GMT-3`),l=document.querySelector("input[name=next_type_selection]:checked")?.value,i=new Date;if(t<=0)return window.alert("Dias de folga não pode ser menor ou igual 0!");if(n<=0)return window.alert("Dias de trabalho não pode ser menor ou igual 0!");if(a.getTime()<i.getTime()){const e=a.getDay(),t=a.getMonth();if(a.getFullYear()<i.getFullYear()||t<i.getMonth()||e<i.getDay()&&t<=i.getMonth())return window.alert("Data inválida!")}return o={startDate:a,nextOptionInput:l,workInput:n,restInput:t,optionInput:e},!0}())return void(a.disabled=!1);let{count:e,milli:t}=function(e){const t=new Date(`${e.getFullYear()}-12-31 23:59:59 GMT-3`).getTime(),n=e.getTime();return{count:parseInt((t-n)/864e5),milli:n}}(o.startDate),l=0;for(;l<e;){for(let n=0;n<o.workInput&&!(l>=e);n++){const e=new Date(t).toISOString().slice(0,10);i.push({calendarId,summary:"work"===o.nextOptionInput?"Trabalho":"Folga",end:{date:e},start:{date:e}}),t+=864e5,l++}for(let n=0;n<o.restInput&&!(l>=e);n++){const e=new Date(t).toISOString().slice(0,10);i.push({calendarId,summary:"work"===o.nextOptionInput?"Folga":"Trabalho",end:{date:e},start:{date:e}}),t+=864e5,l++}}return console.log(i),n.disabled=!1,a.disabled=!1};const l=document.getElementById("help_text");l.style.display="none",document.getElementById("help_button").onclick=function(){return"none"===l.style.display?l.style.display="inline":l.style.display="none"},document.getElementById("start_date").value=(new Date).toISOString().slice(0,10);let o,i=[]})();